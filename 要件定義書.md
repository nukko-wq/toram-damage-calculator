# トーラムオンライン ダメージ計算ツール 要件定義書

## 1. プロジェクト概要
MMORPGトーラムオンラインのダメージ計算を行うWebアプリケーション

## 2. 機能要件

### 2.1 対象となるダメージ計算
- 通常攻撃のダメージ計算
- スキル攻撃のダメージ計算

### 2.2 入力項目

#### 2.2.1 キャラクターステータス
- STR（力）
- INT（知力）
- VIT（体力）
- AGI（俊敏性）
- DEX（器用さ）
- CRT（クリティカル）
- MEN（精神力）
- TEC（技術力）
- レベル

#### 2.2.2 武器関連
**メイン武器**
- 武器種（片手剣、両手剣、杖など）
- 武器ATK
- 安定率
- 精錬値

**サブ武器**
- 武器種（ナイフ、矢など）
- 精錬値

**クリスタ（プリセット選択式）**
- 武器クリスタ（2枠）
  - ドン・プロフンド（ATK10%, STR7%, クリティカル率8%, DEF -27%）
  - 黒衣の聖誕姫（例プロパティ）
- 防具クリスタ（2枠）
  - ccc（例プロパティ）
  - ddd（例プロパティ）
- 追加クリスタ（2枠）
  - aaa（例プロパティ）
  - bbb（例プロパティ）
- 特殊クリスタ（2枠）
  - eee（例プロパティ）
  - fff（例プロパティ）

**クリスタデータ管理方式**
- プリセットクリスタ: JSONファイルで管理（`src/data/crystals.json`）
- ユーザーカスタムクリスタ: LocalStorageで管理
- データ統合: プリセット + ユーザーカスタムを統合してリスト表示

#### 2.2.3 装備カテゴリ
- メイン装備
- 体装備
- 追加装備
- 特殊装備
- サブ武器
- オシャレ装備1
- オシャレ装備2
- オシャレ装備3
- 武器クリスタ
- 防具クリスタ
- 追加クリスタ
- 特殊クリスタ

#### 2.2.4 各装備のプロパティ
- ATK%
- ATK
- MATK%
- MATK
- 武器ATK%
- 武器ATK
- 物理貫通%
- 魔法貫通%
- 属性有利%
- 抜刀威力%
- 抜刀威力
- 近距離威力%
- 遠距離威力%
- クリティカルダメージ%
- クリティカルダメージ
- クリティカル率%
- クリティカル率
- 安定率%
- HP%
- HP
- MP
- STR%
- STR
- INT%
- INT
- VIT%
- AGI%
- AGI
- DEX%
- DEX
- 命中%
- 命中
- 回避%
- 回避
- 攻撃速度%
- 攻撃速度
- 詠唱速度%
- 詠唱速度

#### 2.2.5 敵（防御側）の情報
- 敵のDEF（物理防御力）
- 敵のMDEF（魔法防御力）
- 敵のレベル
- 確定クリティカル（数値、例：100）
- free値

### 2.3 出力項目
- ダメージ計算結果
- 合計ステータス表示

## 3. 非機能要件

### 3.1 UI/UX要件
- 日本語インターフェース
- リアルタイム計算（入力と同時に結果表示）
- レスポンシブデザイン

### 3.2 技術要件
- Next.js 15 + React 19
- TypeScript
- Tailwind CSS
- リアルタイム状態管理

### 3.3 データ管理要件
- プリセットクリスタ: JSONファイル管理
- ユーザーカスタムデータ: LocalStorage管理
- データの永続化とインポート/エクスポート対応

## 4. 開発フェーズ

### フェーズ1（現在）
- 入力フォームの実装
- 基本的なステータス合計表示
- リアルタイム入力対応
- プリセットクリスタ選択システム（JSONベース）

### フェーズ2（今後）
- ダメージ計算ロジックの実装
- 計算結果の詳細表示
- データの保存・読み込み機能
- ユーザーによるクリスタ編集・保存機能（LocalStorageベース）

## 5. 制約事項
- 計算ロジックは複雑なため、フェーズ1では実装せず、入力フォームに集中
- 表示形式の詳細は後の設計で決定