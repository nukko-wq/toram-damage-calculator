# 料理設定UI/UX改善計画書

## 1. 概要
料理設定フォームのユーザビリティとデザインを改善し、より使いやすいインターフェースを提供する。

## 2. 現在の問題点

### 2.1 UI上の問題
- レベルラベルが冗長で画面領域を無駄に使用
- 数値入力フィールドによる操作性の悪さ
- レベル入力時の入力ミス（範囲外値の入力）
- 視覚的な階層が不明確
- **他のフォーム（基本ステータス、武器情報等）と比較してサイズが大きく、統一感に欠ける**

### 2.2 UX上の問題
- キーボード入力が必要で操作が煩雑
- レベル選択時の即座性に欠ける
- 「なし」選択時の空白エリアが視覚的に不自然
- **他コンポーネントとの視覚的バランスが取れていない**

## 3. 改善要求

### 3.1 UI改善要求
- **レベルラベルの削除**: 「レベル」ラベルを表示しない
- **selectによるレベル選択**: input[type="number"]からselectに変更
- **コンパクトなレイアウト**: 画面領域の効率的な使用
- **他コンポーネントとのサイズ統一**: 基本ステータスや武器フォームと同等のコンパクトさ
- **余白とパディングの最適化**: gap、margin、paddingの見直し

### 3.2 UX改善要求
- **直感的な操作**: クリック操作のみでレベル選択完了
- **視覚的な一貫性**: 料理選択とレベル選択の統一感
- **即座性**: 選択操作の即座反映
- **全体的な統一感**: 他のフォームコンポーネントとの視覚的バランス調整

## 4. 具体的な改善案

### 4.1 レベル選択UI変更

**変更前**:
```
[料理名選択▼] レベル: [数値入力フィールド]
```

**変更後**:
```
[料理名選択▼] [レベル選択▼]
```

### 4.2 レベル選択オプション

**selectのoption構成**:
- 料理が「なし」の場合: selectを非表示
- 料理が選択された場合: 1-10の選択肢を表示

```typescript
// レベル選択オプション生成
const levelOptions = Array.from({ length: 10 }, (_, i) => ({
  value: i + 1,
  label: `${i + 1}`
}))
```

### 4.3 レイアウト改善

**コンパクト配置**（他コンポーネントとのサイズ統一）:
```
┌─────────────────────────────────────────┐
│ 1つ目: [料理選択▼] [Lv▼]                │
│ 2つ目: [料理選択▼] [Lv▼]                │
│ 3つ目: [料理選択▼] [Lv▼]                │
│ 4つ目: [料理選択▼] [Lv▼]                │
│ 5つ目: [料理選択▼] [Lv▼]                │
└─────────────────────────────────────────┘
```

**サイズ最適化**:
- スロット間のgapを`space-y-4`から`space-y-2`に縮小
- スロットラベルのフォントサイズ調整
- レベル選択の幅をさらに縮小（`w-16`→`w-12`）
- 全体的なpaddingの調整（`p-6`→`p-4`）

## 5. 実装仕様

### 5.1 コンポーネント変更点

**FoodSlotコンポーネント**（サイズ最適化版）:
```tsx
// 変更前
<div className="flex flex-col gap-2">
  <div className="text-sm font-medium text-gray-700">{slotLabel}</div>
  <div className="flex items-center gap-4">
    {/* 冗長なレベルラベルとinput */}
  </div>
</div>

// 変更後（コンパクト版）
<div className="flex flex-col gap-1">
  <div className="text-xs font-medium text-gray-700">{slotLabel}</div>
  <div className="flex items-center gap-2">
    <div className="flex-1">
      <select className="w-full px-2 py-1 text-sm ...">
        {/* 料理選択 */}
      </select>
    </div>
    {showLevelSelect && (
      <div className="w-12">
        <select className="w-full px-1 py-1 text-sm ...">
          {/* レベル選択 */}
        </select>
      </div>
    )}
  </div>
</div>
```

**全体コンテナの調整**:
```tsx
// 変更前
<div className="rounded-lg border border-gray-200 bg-white p-6">
  <h3 className="mb-4 text-lg font-semibold text-gray-900">料理設定</h3>
  <div className="space-y-4">

// 変更後（コンパクト版）
<div className="rounded-lg border border-gray-200 bg-white p-4">
  <h3 className="mb-3 text-base font-semibold text-gray-900">料理設定</h3>
  <div className="space-y-2">
```

### 5.2 スタイリング改善（コンパクト化）

**selectボックスの統一**:
- 料理選択：`px-2 py-1 text-sm`（基本ステータスと同等）
- レベル選択：`px-1 py-1 text-sm`（最小限のパディング）
- ボーダー、フォントサイズの他コンポーネントとの統一
- hover/focusステートの統一

**サイズ調整の詳細**:
- スロットラベル：`text-sm`→`text-xs`（基本ステータスと同等）
- タイトル：`text-lg`→`text-base`（武器フォームと同等）
- 全体パディング：`p-6`→`p-4`（基本ステータスと同等）
- スロット間隔：`space-y-4`→`space-y-2`（密度向上）
- 要素間gap：`gap-4`→`gap-2`（コンパクト化）

**レスポンシブ対応**:
- 小画面でも横並びを維持（レベル選択が小さいため）
- 大画面では他コンポーネントと同等の高さを目標

### 5.3 アクセシビリティ改善

**キーボードナビゲーション**:
- Tab順序の最適化
- Arrow keyによるselect内ナビゲーション対応

**スクリーンリーダー対応**:
- aria-labelによる料理スロットの説明（1つ目、2つ目、3つ目、4つ目、5つ目）
- レベル選択の文脈説明

## 6. 技術的考慮事項

### 6.1 バリデーション変更

**Zodスキーマ**: 既存のバリデーションを維持
- レベル範囲（1-10）の制約
- 「なし」選択時のレベル0制約

### 6.2 状態管理

**React Hook Form**:
- register APIの対象をinputからselectに変更
- 既存のwatchとsetValueロジックは維持

### 6.3 後方互換性

**データ形式**: 既存のFoodFormDataインターフェースを維持
- selectedFood: FoodType
- level: number (0-10)

## 7. 実装優先度

### 7.1 Phase 1（高優先度）
- レベルラベルの削除
- input → select変更
- 基本的なレイアウト調整

### 7.2 Phase 2（中優先度）
- スタイリングの細調整
- レスポンシブ対応
- hover/focusエフェクト

### 7.3 Phase 3（低優先度）
- アクセシビリティ強化
- アニメーション効果
- ツールチップ追加

## 8. 期待される効果

### 8.1 ユーザビリティ向上
- **操作時間短縮**: クリック操作のみでレベル選択完了
- **入力ミス削減**: select選択による範囲外値入力の防止
- **視認性向上**: コンパクトで見やすいレイアウト
- **全体統一感**: 他のフォームコンポーネントとの視覚的バランス向上
- **画面効率**: 限られた画面領域の有効活用

### 8.2 開発効率向上
- **保守性向上**: 統一されたselect要素による管理簡素化
- **バグ削減**: 数値入力に関する検証処理の簡素化
- **デザイン一貫性**: 他コンポーネントと同等のスタイリング規則

## 9. 実装スケジュール

- **設計・レビュー**: 0.5日
- **実装**: 1日
- **テスト・調整**: 0.5日
- **総工数**: 2日

## 10. リスク要因

### 10.1 技術的リスク
- **低**: 既存のバリデーション機能は維持される
- **低**: React Hook Formの基本機能内での変更

### 10.2 UXリスク
- **低**: select操作は一般的なUI操作で学習コストなし
- **低**: 現在よりも操作性が向上することが確実

---

**作成日**: 2025-01-17  
**対象システム**: トーラムオンライン ダメージ計算ツール  
**対象機能**: 料理設定フォーム