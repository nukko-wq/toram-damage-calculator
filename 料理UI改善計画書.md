# 料理設定UI/UX改善計画書

## 1. 概要
料理設定フォームのユーザビリティとデザインを改善し、より使いやすいインターフェースを提供する。

## 2. 現在の問題点

### 2.1 UI上の問題
- レベルラベルが冗長で画面領域を無駄に使用
- 数値入力フィールドによる操作性の悪さ
- レベル入力時の入力ミス（範囲外値の入力）
- 視覚的な階層が不明確

### 2.2 UX上の問題
- キーボード入力が必要で操作が煩雑
- レベル選択時の即座性に欠ける
- 「なし」選択時の空白エリアが視覚的に不自然

## 3. 改善要求

### 3.1 UI改善要求
- **レベルラベルの削除**: 「レベル」ラベルを表示しない
- **selectによるレベル選択**: input[type="number"]からselectに変更
- **コンパクトなレイアウト**: 画面領域の効率的な使用

### 3.2 UX改善要求
- **直感的な操作**: クリック操作のみでレベル選択完了
- **視覚的な一貫性**: 料理選択とレベル選択の統一感
- **即座性**: 選択操作の即座反映

## 4. 具体的な改善案

### 4.1 レベル選択UI変更

**変更前**:
```
[料理名選択▼] レベル: [数値入力フィールド]
```

**変更後**:
```
[料理名選択▼] [レベル選択▼]
```

### 4.2 レベル選択オプション

**selectのoption構成**:
- 料理が「なし」の場合: selectを非表示
- 料理が選択された場合: 1-10の選択肢を表示

```typescript
// レベル選択オプション生成
const levelOptions = Array.from({ length: 10 }, (_, i) => ({
  value: i + 1,
  label: `${i + 1}`
}))
```

### 4.3 レイアウト改善

**コンパクト配置**:
```
┌─────────────────────────────────────────┐
│ 1つ目: [料理選択▼] [レベル▼]            │
│ 2つ目: [料理選択▼] [レベル▼]            │
│ 3つ目: [料理選択▼] [レベル▼]            │
│ 4つ目: [料理選択▼] [レベル▼]            │
│ 5つ目: [料理選択▼] [レベル▼]            │
└─────────────────────────────────────────┘
```

## 5. 実装仕様

### 5.1 コンポーネント変更点

**FoodSlotコンポーネント**:
```tsx
// 変更前
{showLevelInput ? (
  <div className="w-20">
    <div className="block text-xs text-gray-600">レベル</div>
    <input type="number" min="1" max="10" ... />
  </div>
) : (
  <div className="w-20">
    <div className="block text-xs text-gray-400">レベル</div>
    <div className="...">-</div>
  </div>
)}

// 変更後
{showLevelSelect && (
  <div className="w-16">
    <select className="...">
      {levelOptions.map(option => (
        <option key={option.value} value={option.value}>
          {option.label}
        </option>
      ))}
    </select>
  </div>
)}
```

### 5.2 スタイリング改善

**selectボックスの統一**:
- 料理選択とレベル選択で同一のスタイル適用
- ボーダー、パディング、フォントサイズの統一
- hover/focusステートの統一

**レスポンシブ対応**:
- 小画面では縦並びレイアウト
- 大画面では横並びでコンパクト表示

### 5.3 アクセシビリティ改善

**キーボードナビゲーション**:
- Tab順序の最適化
- Arrow keyによるselect内ナビゲーション対応

**スクリーンリーダー対応**:
- aria-labelによる料理スロットの説明（1つ目、2つ目、3つ目、4つ目、5つ目）
- レベル選択の文脈説明

## 6. 技術的考慮事項

### 6.1 バリデーション変更

**Zodスキーマ**: 既存のバリデーションを維持
- レベル範囲（1-10）の制約
- 「なし」選択時のレベル0制約

### 6.2 状態管理

**React Hook Form**:
- register APIの対象をinputからselectに変更
- 既存のwatchとsetValueロジックは維持

### 6.3 後方互換性

**データ形式**: 既存のFoodFormDataインターフェースを維持
- selectedFood: FoodType
- level: number (0-10)

## 7. 実装優先度

### 7.1 Phase 1（高優先度）
- レベルラベルの削除
- input → select変更
- 基本的なレイアウト調整

### 7.2 Phase 2（中優先度）
- スタイリングの細調整
- レスポンシブ対応
- hover/focusエフェクト

### 7.3 Phase 3（低優先度）
- アクセシビリティ強化
- アニメーション効果
- ツールチップ追加

## 8. 期待される効果

### 8.1 ユーザビリティ向上
- **操作時間短縮**: クリック操作のみでレベル選択完了
- **入力ミス削減**: select選択による範囲外値入力の防止
- **視認性向上**: コンパクトで見やすいレイアウト

### 8.2 開発効率向上
- **保守性向上**: 統一されたselect要素による管理簡素化
- **バグ削減**: 数値入力に関する検証処理の簡素化

## 9. 実装スケジュール

- **設計・レビュー**: 0.5日
- **実装**: 1日
- **テスト・調整**: 0.5日
- **総工数**: 2日

## 10. リスク要因

### 10.1 技術的リスク
- **低**: 既存のバリデーション機能は維持される
- **低**: React Hook Formの基本機能内での変更

### 10.2 UXリスク
- **低**: select操作は一般的なUI操作で学習コストなし
- **低**: 現在よりも操作性が向上することが確実

---

**作成日**: 2025-01-17  
**対象システム**: トーラムオンライン ダメージ計算ツール  
**対象機能**: 料理設定フォーム