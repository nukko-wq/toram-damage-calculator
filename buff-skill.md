# バフスキル システム仕様書

## 1. 概要
トーラムオンラインのバフスキルのオン/オフ設定とレベル・パラメータ調整を行うシステム。
各バフスキルは個別にオン/オフ切り替え可能で、有効時は対応するレベルやパラメータを設定できる。

## 2. バフスキル一覧

### 2.1 マスタリスキル

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| ハルバードマスタリ | スキルレベル | 1-10 | マスタリ系スキル |

### 2.2 ブレードスキル

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| ウォークライ | - | オン/オフのみ | 固定効果 |
| バーサーク | - | オン/オフのみ | 固定効果 |

### 2.3 シュートスキル

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| 武士弓術 | - | オン/オフのみ | 固定効果 |
| ロングレンジ | スキルレベル | 1-10 | 遠距離威力アップ |

### 2.4 ハルバードスキル

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| クイックオーラ | スキルレベル | 1-10 | 攻撃速度アップ |
| 会心の捌き | - | オン/オフのみ | 固定効果 |
| トルネードランス | カウント数 | 1-10 | 重ねがけ効果 |
| 神速の捌手 | 重ねがけ数 | 1-3 | 最大3重ねがけ |
| トールハンマー | - | オン/オフのみ | 固定効果 |

### 2.5 モノノフスキル

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| 武士道 | スキルレベル | 1-10 | クリティカル率アップ |
| 明鏡止水 | スキルレベル | 1-10 | 命中・回避アップ |
| 両手持ち | - | オン/オフのみ | 固定効果 |
| 怪力乱神 | スキルレベル | 1-10 | 攻撃力アップ |

### 2.6 デュアルソードスキル

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| 神速の軌跡 | スキルレベル | 1-10 | 攻撃速度アップ |
| フィロエクレール | スキルレベル | 1-10 | 属性攻撃アップ |

### 2.7 スプライトスキル

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| エンハンス | - | オン/オフのみ | 固定効果 |
| スタピリス | - | オン/オフのみ | 固定効果 |
| プリエール | - | オン/オフのみ | 固定効果 |

### 2.8 ダークパワースキル

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| エターナルナイトメア | スキルレベル | 1-10 | |
| | 使用スキルポイント | 25-80 | 効果に影響 |

### 2.9 シールドスキル

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| プロテクション | - | オン/オフのみ | 固定効果 |
| イージス | - | オン/オフのみ | 固定効果 |

### 2.10 ナイトスキル

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| ナイトプレッジ | スキルレベル | 1-10 | |
| | プレイヤーの数 | 0-4 | パーティメンバー数 |
| | 盾精錬値 | 1-15 | 装備している盾の精錬値 |

### 2.11 ハンタースキル

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| カムフラージュ | スキルレベル | 1-10 | 隠密効果 |

### 2.12 アサシンスキル

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| シーカーリウス | - | オン/オフのみ | 固定効果 |
| 暗殺の極意 | - | オン/オフのみ | 固定効果 |

### 2.13 ニンジャスキル

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| 忍道 | スキルレベル | 1-10 | 忍者の基本スキル |
| 忍術 | スキルレベル | 1-10 | 忍術系スキル |
| 忍術鍛錬Ⅰ | スキルレベル | 1-10 | 忍術強化スキル |
| 忍術鍛錬Ⅱ | スキルレベル | 1-10 | 忍術強化スキル |

### 2.14 サポートスキル

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| ブレイブ | 使用者か？ | 0-1 | 0:他者使用, 1:自己使用 |
| ハイサイクル | - | オン/オフのみ | 固定効果 |
| クイックモーション | - | オン/オフのみ | 固定効果 |
| マナリチャージ | - | オン/オフのみ | 固定効果 |

### 2.15 サバイバルスキル

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| MPブースト | スキルレベル | 1-10 | MP最大値アップ |

### 2.16 バトルスキル

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| スペルバースト | - | オン/オフのみ | 固定効果 |
| クリティカルUP | - | オン/オフのみ | 固定効果 |
| HPブースト | スキルレベル | 1-10 | HP最大値アップ |
| 攻撃力UP | スキルレベル | 1-10 | 攻撃力アップ |
| 脅威の威力 | スキルレベル | 1-10 | 攻撃力アップ |
| 魔法力UP | スキルレベル | 1-10 | 魔法攻撃力アップ |
| 更なるまりょく | スキルレベル | 1-10 | 魔法攻撃力アップ |
| 命中UP | スキルレベル | 1-10 | 命中率アップ |
| 回避UP | スキルレベル | 1-10 | 回避率アップ |

### 2.17 ペット使用スキル（赤バフ）

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| ブレイブアップ | - | オン/オフのみ | ペット専用バフ |
| マインドアップ | - | オン/オフのみ | ペット専用バフ |
| カットアップ | - | オン/オフのみ | ペット専用バフ |
| クリティカルアップ | - | オン/オフのみ | ペット専用バフ |

### 2.18 ミンストレルスキル

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| 熱情の歌 | カウント数 | 1-10 | 重ねがけ効果 |

### 2.19 パルチザンスキル

| スキル名 | 設定パラメータ | 範囲 | 備考 |
|---------|----------------|------|------|
| 前線維持Ⅱ | スキルレベル | 1-10 | 防御力アップ |

## 3. UI設計仕様

### 3.1 基本レイアウト
- **セクション分割**: スキル系統別にグループ化して表示
- **折りたたみ機能**: 各スキル系統セクションは折りたたみ可能
- **検索機能**: スキル名での絞り込み検索（将来実装予定）

### 3.2 スキル設定UI
- **オン/オフスイッチ**: 各スキルの有効/無効を切り替え
- **パラメータ入力**: スキルレベルや特殊パラメータの数値入力
- **リアルタイム反映**: 設定変更時に即座にダメージ計算に反映

### 3.3 バリデーション
- **数値範囲チェック**: 各パラメータの最小/最大値制限
- **必須項目チェック**: オン状態での必須パラメータ検証
- **エラー表示**: 不正な値入力時の視覚的フィードバック

## 4. データ構造

### 4.1 バフスキルデータ型
```typescript
interface BuffSkill {
  id: string
  name: string
  category: BuffSkillCategory
  isEnabled: boolean
  parameters: BuffSkillParameters
}

interface BuffSkillParameters {
  skillLevel?: number      // 1-10
  stackCount?: number      // 重ねがけ数
  playerCount?: number     // プレイヤー数
  refinement?: number      // 精錬値
  spUsed?: number         // 使用SP
  isCaster?: number       // 使用者フラグ
}

type BuffSkillCategory = 
  | 'mastery' | 'blade' | 'shoot' | 'halberd' | 'mononofu'
  | 'dualSword' | 'sprite' | 'darkPower' | 'shield' | 'knight'
  | 'hunter' | 'assassin' | 'ninja' | 'support' | 'survival'
  | 'battle' | 'pet' | 'minstrel' | 'partisan'
```

### 4.2 デフォルト値
```typescript
const getDefaultBuffSkills = (): BuffSkill[] => [
  // 全スキルをisEnabled: false, パラメータは最小値で初期化
]
```

## 5. 実装優先度

### 5.1 フェーズ1（基本機能）
- バフスキル一覧の表示
- オン/オフの切り替え機能
- 基本的なパラメータ入力

### 5.2 フェーズ2（高度な機能）
- スキル系統別の折りたたみ表示
- 検索・絞り込み機能
- プリセット保存・読み込み

### 5.3 フェーズ3（最適化）
- ダメージ計算への統合
- パフォーマンス最適化
- UI/UXの改善

## 6. 注意事項
- スキル効果の詳細な数値計算は、ダメージ計算ロジック実装時に定義
- ゲームバランス調整に応じて効果値は変更される可能性がある
- 新スキル追加時は本仕様書とUIの更新が必要