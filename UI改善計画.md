# EquipmentForm UI改善計画書

## 改善の背景

### 改善前の問題点
- 17のカテゴリが縦に配置され、スクロールが非常に長い
- 全てのプロパティが同じ優先度で表示されている
- よく使用する項目と使用頻度の低い項目が混在している
- ユーザーが目的のプロパティを見つけるのに時間がかかる

### 改善の目標
- ユーザビリティの向上
- よく使用されるプロパティへの素早いアクセス
- UI操作の効率化
- 縦スクロールの大幅削減

## 改善内容

### 1. 横スクロールタブ式レイアウトの採用

**従来:** 縦に17カテゴリを配置
```
攻撃力
├─ ATK%, ATK, MATK%, MATK...
防御力  
├─ DEF%, DEF, MDEF%, MDEF
...（長いスクロール）
```

**改善後:** 水平タブで切り替え
```
[攻撃・威力★] [クリティカル★] [ステータス★] [HP・MP・速度★] → スクロール →
```

### 2. 使用頻度に基づくカテゴリ再編成

#### 高頻度（★ よく使う）- 優先表示
1. **攻撃・威力**
   - ATK%, ATK, MATK%, MATK, 武器ATK%, 武器ATK
   - 物理貫通%, 魔法貫通%, 属性有利%
   - 抜刀威力%, 抜刀威力, 近距離威力%, 遠距離威力%
   - クリティカルダメージ%, クリティカルダメージ
   - クリティカル率%, クリティカル率, 安定率%

2. **ステータス**
   - HP%, HP, MP%, MP
   - STR%, STR, INT%, INT, VIT%, VIT
   - AGI%, AGI, DEX%, DEX
   - 命中%, 命中, 回避%, 回避
   - 攻撃速度%, 攻撃速度, 詠唱速度%, 詠唱速度, 行動速度%

3. **継戦補助**
   - 攻撃MP回復%, 攻撃MP回復
   - 物理耐性%, 魔法耐性%, 異常耐性%
   - ヘイト%, 復帰短縮%
   - HP自然回復%, HP自然回復, MP自然回復%, MP自然回復

4. **戦闘補助**
   - 防御崩し%, 先読み%
   - Guard力%, Guard回復%, Avoid回復%
   - 道具速度
   - 絶対命中%, 絶対回避%

#### 低頻度（使用頻度低）- 後方配置
5. **ステータス連動攻撃力**
6. **属性耐性**
7. **ダメージ軽減**
8. **バリア/追撃**
   - 物理バリア, 魔法バリア, 割合バリア, バリア速度%
   - 物理追撃%, 魔法追撃%

### 3. 視覚的改善

#### タブデザイン
- **優先度インジケータ:** ★（高）、○（中）、無印（低）
- **色分けボーダー:** 
  - 高頻度: 青色ボーダー（`border-blue-300`）
  - 中頻度: 黄色ボーダー（`border-yellow-300`）
  - 低頻度: グレーボーダー（`border-gray-300`）
- **アクティブタブ:** 青色背景（`bg-blue-500`）

#### スクロール機能
- 水平スクロール対応
- スクロールバー非表示（`scrollbar-hide`クラス）
- タッチデバイス対応

### 4. 技術実装

#### 状態管理
```typescript
const [activePropertyTab, setActivePropertyTab] = useState<
  Record<keyof EquipmentSlots, number>
>({
  main: 0,
  body: 0,
  additional: 0,
  special: 0,
  subWeapon: 0,
  fashion1: 0,
  fashion2: 0,
  fashion3: 0,
})
```

#### データ構造
```typescript
const propertyGroups = [
  {
    title: '攻撃・威力',
    priority: 'high' as const,
    properties: ['ATK_Rate', 'ATK', ...] as const,
  },
  // ...
] as const
```

#### CSS改善
```css
/* グローバルスタイル追加 */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}
```

## 実装結果

### 達成された改善点
1. **縦スクロール大幅削減:** 17カテゴリ → 1カテゴリ表示
2. **アクセス効率向上:** よく使う項目が最初に表示
3. **視覚的わかりやすさ:** 優先度が一目でわかる
4. **レスポンシブ対応:** モバイルでも使いやすい
5. **装備スロット独立:** 各スロットで独立したタブ状態

### ユーザーエクスペリエンス向上
- **初期表示:** 「攻撃・威力」タブが選択された状態
- **効率的ナビゲーション:** 横スクロールで素早くカテゴリ移動
- **直感的な優先度:** ★印でよく使う項目を識別
- **状態保持:** 装備スロットを切り替えても各タブ状態を記憶

## 今後の拡張可能性

### カスタマイズ機能
- ユーザー独自の優先度設定
- よく使うプロパティのお気に入り機能
- カテゴリの並び順カスタマイズ

### 検索・フィルタ機能
- プロパティ名での検索
- 値が設定されているプロパティのハイライト
- ゼロ以外の値のみ表示するフィルタ

### その他の改善案
- プロパティ入力時のバリデーション強化
- 一括設定機能（同じ値を複数プロパティに設定）
- プリセット値の提案機能

---

**実装日:** 2025-06-18  
**対象ファイル:** `src/components/EquipmentForm.tsx`, `src/app/globals.css`  
**実装者:** Claude Code  
**ステータス:** 完了