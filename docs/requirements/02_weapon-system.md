# 武器システム要件
**メイン武器**
- 武器種（片手剣、両手剣、杖など）
- 武器ATK：0-1500
- 安定率：0-100
- 精錬値：選択式（未精錬、1-9、E、D、C、B、A、S）

**サブ武器**
- 武器種（ナイフ、矢など）
- 武器ATK：0-1500
- 安定率：0-100
- 精錬値：選択式（未精錬、1-9、E、D、C、B、A、S）

**武器組み合わせシステム**
メイン武器の武器種によってサブ武器で選択可能な武器種が制限される。

- **素手**: ナイフ、矢、盾、魔道具、手甲、巻物、なし
- **片手剣**: ナイフ、矢、盾、魔道具、手甲、巻物、なし
- **双剣**: 片手剣（固定、なし選択不可）
- **両手剣**: なし（固定、他選択不可）
- **手甲**: ナイフ、矢、盾、魔道具、なし
- **旋風槍**: ナイフ、矢、なし
- **抜刀剣**: ナイフ、巻物、なし
- **弓**: 矢、抜刀剣、なし
- **自動弓**: ナイフ、矢、盾、魔道具、手甲、なし
- **杖**: ナイフ、矢、盾、魔道具、手甲、巻物、なし
- **魔道具**: 巻物、なし

**武器組み合わせUI要件**
- メイン武器選択時にサブ武器の選択肢を動的に更新
- 無効な組み合わせの場合は自動的に「なし」または固定武器に設定
- 双剣選択時はサブ武器を「片手剣」に自動設定
- 両手剣選択時はサブ武器を「なし」に自動設定
- 選択可能な武器種のみをドロップダウンに表示

**精錬値システム**
精錬値の表示と内部計算値の対応関係を定義する。

**精錬値表示形式**:
- UI表示：未精錬、1、2、3、4、5、6、7、8、9、E、D、C、B、A、S
- 内部計算値：0、1、2、3、4、5、6、7、8、9、10、11、12、13、14、15

**精錬値対応表**:
| 表示 | 内部計算値 | 説明 |
|------|-----------|------|
| 未精錬 | 0 | 精錬していない状態 |
| 1-9 | 1-9 | 数値精錬（通常精錬） |
| E | 10 | 特殊精錬E |
| D | 11 | 特殊精錬D |
| C | 12 | 特殊精錬C |
| B | 13 | 特殊精錬B |
| A | 14 | 特殊精錬A |
| S | 15 | 特殊精錬S |

**精錬値UI要件**:
- 選択式ドロップダウンで表示形式を表示
- 内部計算では0-15の数値で処理
- セーブデータには表示形式で保存
- デフォルト値は「未精錬」

**クリスタ（プリセット選択式）**
- 武器クリスタ（2枠）
  - ドン・プロフンド（ATK10%, STR7%, クリティカル率8%, DEF -27%）
  - 黒衣の聖誕姫（例プロパティ）
- 防具クリスタ（2枠）
  - ccc（例プロパティ）
  - ddd（例プロパティ）
- 追加クリスタ（2枠）
  - aaa（例プロパティ）
  - bbb（例プロパティ）
- 特殊クリスタ（2枠）
  - eee（例プロパティ）
  - fff（例プロパティ）
- ノーマルクリスタ
  - 全てのスロット（武器、防具、追加、特殊）に装着可能
  - 汎用的なプロパティを持つクリスタ

**クリスタデータ管理方式**
- プリセットクリスタ: JSONファイルで管理（`src/data/crystals.json`）
- ユーザーカスタムクリスタ: LocalStorageで管理
- データ統合: プリセット + ユーザーカスタムを統合してリスト表示

**クリスタ選択UI**
- オーバーレイモーダル方式での選択画面
- グリッドレイアウトでのクリスタ一覧表示
- クリスタカード形式（名前、効果、説明表示）
- タイプ別フィルタリング（専用/ノーマル）
- 背景クリック・ESCキーでモーダル閉じる
- 検索・絞り込み機能（将来実装予定）

