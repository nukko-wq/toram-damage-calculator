# バフ系システム

## 料理（バフ効果）

### 料理プリセット選択機能
- 料理スロット: 5枠
- selectドロップダウン方式での料理選択
- 各料理の効果レベル設定: 1-10（「なし」を除く）

### 料理一覧
- なし
- おかかおにぎり（STR）: 1-10
- 鮭おにぎり（DEX）: 1-10
- 梅干しおにぎり（INT）: 1-10
- 明太子おにぎり（AGI）: 1-10
- ツナマヨおにぎり（VIT）: 1-10
- しょうゆラーメン（命中）: 1-10
- 属性パスタ（属性有利共通）: 1-10
- たこ焼き（クリ率）: 1-10
- 焼きそば（攻撃MP回復）: 1-10
- 黄金チャーハン（HP）: 1-10
- あんかけチャーハン（MP）: 1-10
- マルゲリータピザ（武器ATK+）: 1-10
- ディアボラピザ（ATK+）: 1-10
- シーフードピザ（MATK+）: 1-10
- ビーフシチュー（ヘイト+）: 1-10
- ホワイトシチュー（ヘイト-）: 1-10
- ビーフバーガー（物理耐性）: 1-10
- フィッシュバーガー（魔法耐性）: 1-10

## バフアイテム設定

### バフアイテムシステム
- 各種バフアイテムの選択・適用機能
- カテゴリ別の効果アイテムの管理
- リアルタイムでのステータス計算への反映
- システム提供プリセットアイテムのみ選択可能（ユーザーカスタム不可）

### バフアイテムカテゴリ
1. **物理威力**: ペネトレイトオイル、みなぎる丸薬、ランタンケーキ
2. **魔法威力**: 魔法障壁の石板、魔道士の秘薬、苦いプルプル
3. **物理防御**: 謎のポーション(Y)、銀杏の炊き込みご飯
4. **魔法防御**: 謎のポーション(P)
5. **属性攻撃**: ゾンビケーキ(有利共通)、かぼちゃの飴玉(有利共通)
6. **属性防御**: 属性ケーキ類(共通)、たこけん焼き(共通)
7. **速度**: テラスピードポッド、ギガスピードポッド
8. **詠唱**: リスニングホン、ぶどうゼリー
9. **MP**: アドマジクルⅢ、ロノーゴ海老ソテー
10. **HP**: ドラゴンステーキ、プラスバイタⅥ
11. **命中**: 戦霊の輪、葉桜茶
12. **回避**: 黄金ポム鮭

### バフアイテムプロパティ設計
- 装備・プロパティシステムと同一のプロパティ構造を採用
- %系プロパティ: -1000 ～ 1000
- 固定値プロパティ: -99999 ～ 99999
- 全70+種類のプロパティに対応

### バフアイテム選択UI
- モーダル選択方式での選択（装備・クリスタ選択と統一されたデザイン）
- 各カテゴリごとに選択ボタンをクリックしてモーダル表示
- オーバーレイモーダル方式でのアイテム選択画面
- グリッドレイアウトでのバフアイテム一覧表示
- バフアイテムカード形式（名前、カテゴリ、効果プロパティ表示）
- 各カテゴリごとに1つのアイテムを選択可能
- 「なし」選択でアイテム効果を無効化
- 背景クリック・ESCキーでモーダル閉じる
- 選択済みアイテムの情報をボタン上に表示（名前、効果概要）
- プリセットアイテムのみ選択可能（ユーザーカスタムアイテム作成不可）

### バフアイテムデータ管理
- プリセットデータ: JSONファイルで管理（`src/data/buffItems.json`）
- ユーザーカスタム不可：システム提供アイテムのみ使用可能
- セーブデータに選択状態を保存

## レジスタ他システム

### レジスタ他（レジスタレット・ギルド料理）システム
- レジスタレット（18種類）とギルド料理（2種類）の効果設定機能
- オン/オフ切り替えによる効果の有効/無効制御
- 効果レベル設定（各項目ごとに異なる範囲設定）
- 運命共同体の特殊設定（レベル + パーティメンバー数の2項目入力）

### タブナビゲーション統合
- 装備/プロパティのタブナビゲーション内に「レジスタ他」タブを追加
- オシャレ3の後ろの位置（自由入力1の前）に配置
- 他の装備タブと同一のタブスタイルとレスポンシブ対応

### レジスタレット項目（18種類）
1. 物理攻撃アップ（レベル：1-30）
2. 魔法攻撃アップ（レベル：1-30）
3. 最大HPアップ（レベル：1-100）
4. 最大MPアップ（レベル：1-100）
5. 命中アップ（レベル：1-10）
6. 回避アップ（レベル：1-10）
7. 攻撃速度アップ（レベル：1-100）
8. 魔法速度アップ（レベル：1-100）
9. 運命共同体（レベル：1、パーティメンバー数：1-3）
10. 無の構え（レベル：1-10）
11. 術式アロー・追撃（レベル：1-4）
12. エアスライド・圧縮（レベル：1-10）
13. アサシンスタブ・強化（レベル：1-10）
14. レゾナンス・火力（レベル：1-9）
15. レゾナンス・加速（レベル：1-9）
16. レゾナンス・集中（レベル：1-9）

### ギルド料理項目（2種類）
17. おいしい食材取引（レベル：1-10）
18. 新鮮な果物取引（レベル：1-10）

### UI設計
- **項目表示方式**: 縦一列に全20項目をリスト表示
- **オン/オフ切り替え**: 各項目名の右側にトグルボタン（有効：緑色、無効：グレー）
- **レベル入力モーダル**: 項目名をクリックでモーダル表示
  - レベル数値入力フィールド（範囲バリデーション付き）
  - 運命共同体のみ「パーティメンバー数」の追加入力フィールド
  - 確定/キャンセルボタン
- **現在値表示**: 項目名に現在のレベル値を表示（例：物理攻撃アップ/25）
- **レベル初期値**: 全項目レベル最大値でスタート、運命共同体のパーティメンバー数は3でスタート

### データ管理
- セーブデータに各項目の有効/無効状態とレベル値を保存
- プロパティ変換システムと連動し、リアルタイムでダメージ計算に反映
- LocalStorageを使用した永続化（セーブデータ依存）

## バフスキル設定

### バフスキルシステム
- 各種バフスキルのオン/オフ設定機能
- スキルレベルや特殊パラメータの調整機能
- スキル系統別のグループ化表示
- リアルタイムでのダメージ計算への反映

### 詳細仕様
- **参照**: `buff-skill.md`に詳細な仕様を記載
- **対象スキル**: 合計58種類のバフスキル
  - マスタリ系、各武器スキル系統
  - サポート系、バトル系、ペット系など
- **設定パラメータ**: スキルごとに異なる設定項目

### 特殊パラメータスキル
- **エターナルナイトメア**: スキルレベル（1-10）+ 使用スキルポイント（25-80）
- **ナイトプレッジ**: スキルレベル（1-10）+ プレイヤー数（0-4）+ 盾精錬値（1-15）
- **ブレイブ**: バフ使用者フラグ（自己使用: 1 / 他者使用: 0）
- **情熱の歌**: カウント数（1-10）- 重ねがけスキル
- **神速の捌手**: 重ねがけ回数（1-3）- 重ねがけ制限付きスキル

### UI操作方式
- スキル名クリックでポップオーバー表示（画面中央固定）
- ポップオーバー内で複数パラメータの同時編集
- 適用/キャンセルボタンによる一括変更確定
- スキル名に現在のパラメータ値を表示（例: ナイトプレッジ/10）
  - スキルレベル（1-10）
  - 重ねがけ数、プレイヤー数、精錬値など

### バフスキルUI設計
- グリッドレイアウト: 5カラム（レスポンシブ対応）で全スキルを平坦表示
- スキルカード構成:
  - カテゴリラベル（上部）: スキル系統名を表示
  - スキル名（中央左）: クリックでポップオーバー表示 + パラメータ値表示（例: ハルバードマスタリ/10）
  - 有効・無効ボタン（中央右）: 2つのボタンで状態表示・切り替え
    - 有効ボタン: スキルが有効時は緑色背景 + 白文字、無効時はグレー色背景 + グレー文字
    - 無効ボタン: スキルが無効時は赤色背景 + 白文字、有効時はグレー色背景 + グレー文字
    - 各ボタンクリックで直接状態変更
- ポップオーバー機能: スキル名クリックで専用フォームを表示
  - パラメータ入力: スキルレベル、重ねがけ数等の詳細設定
  - 適用/キャンセルボタン
- バリデーション: 範囲制限とエラー表示

### 武器種連動スキル自動表示機能

#### マスタリスキル自動表示
- メイン武器の武器種に応じて該当するマスタリスキルを自動表示
- 武器種とマスタリスキルの対応関係:
  - 素手: シールドマスタリ
  - 片手剣: ブレードマスタリ + シールドマスタリ
  - 双剣: ブレードマスタリ + デュアルマスタリ
  - 両手剣: ブレードマスタリ
  - 手甲: マーシャルマスタリ + シールドマスタリ
  - 旋風槍: ハルバードマスタリ
  - 抜刀剣: 該当なし（マスタリスキル全体を非表示）
  - 弓: シュートマスタリ
  - 自動弓: シュートマスタリ + シールドマスタリ
  - 杖: マジックマスタリ + シールドマスタリ
  - 魔導具: マジックマスタリ

#### 武器種専用スキル自動表示
- メイン武器の武器種に応じて該当する専用スキルを自動表示
- 武器種と専用スキルの対応関係:
  - 旋風槍: トールハンマー、トルネードランス、会心の捌き（ハルバードスキル）

#### 共通仕様
- 非該当のスキルは表示されない（UI上で非表示）
- 武器種変更時の動作:
  - 変更前のマスタリスキル・専用スキル設定は**リセット**される
  - 新しい武器種に対応するスキルはデフォルト状態（無効・初期パラメータ）で表示